<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>JS Drum Kit</title>
  </head>
  <body>
    <h1>Fun with promises</h1>

    <script>
      /**
             * Build a guessing game:
             *  1. A user can enter a number
                2. The system picks a random number from 1 to 6
                3. If the user's number is equal to a random number, give the user 2 points
                4. If the user's number is different than the random number by 1, give the user 1 point. Otherwise, give the user 0 points
                5. The user can play the game as long as they want to
             */
      /*1.create a prompt;
            2.get user Input;
            3.generate random number */
      const enterNumber = () => {
        return new Promise((resolve, reject) => {
          const number = Number(
            window.prompt("input a number between 1 and 6")
          );
          const randomNumber = Math.floor(Math.random() * 6 + 1);
          if (isNaN(number)) {
            reject(new Error("Wrong Input Type"));
          }

          //if (number < 1 || number > 6) {
          //  reject(new Error("Wrong Input Number"));
          //}

          if (number === randomNumber) {
            resolve({ points: 2, randomNumber });
          }
          if (number - randomNumber === 1 || randomNumber - number === 1) {
            resolve({ points: 1, randomNumber });
          }
        });
      };
      //enterNumber()
      //  .then((v) => console.log(v))
      //  .catch((v) => console.log(new Error("Wrong Input Type")));
      /*1.creat a promise
      2.resolve if user wants to continue
      3.reject if user doesnot want to continue*/

      const continueGame = () => {
        return new Promise((resolve, reject) => {
          continueOfNot = confirm("Continue?");
          if (continueOfNot) {
            resolve(true);
          } else {
            reject(false);
          }
        });
      };

      //this function brings it all together
      //1.call the enterNumber function

      //2.if we have a result, display it

      //3.ask the user if they want to continue
      //4.if so, call enterNumber again
      const handleGuess = () => {
        enterNumber().then((result) =>
          alert(`Dice: ${result.randomNumber}:you got ${result.points}points`)
        );
      };
      continueGame()
        .then((result) => {
          if (result) {
            handleGuess();
          } else {
            alart("Game ends");
          }
        })
        .catch((error) => alert(error));
      handleGuess();
    </script>
  </body>
</html>
